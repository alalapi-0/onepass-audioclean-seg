Metadata-Version: 2.4
Name: onepass-audioclean-seg
Version: 0.1.0
Summary: Repo2 分段模块：将长音频切成候选片段（segments）
Author: onepass
License: MIT
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Requires-Python: >=3.10
Description-Content-Type: text/markdown
License-File: LICENSE
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Dynamic: license-file

# onepass-audioclean-seg

Repo2 分段模块：将长音频切成候选片段（segments）

## 定位与边界

### 包含范围
- 将长音频文件分割成候选片段（segments）
- 支持多种分段策略（silence、energy、vad）
- 本地离线处理，无需网络连接
- 面向 Repo1 的输出格式（`audio.wav` + `meta.json`）

### 不包含范围
- ❌ ASR（语音识别）
- ❌ 口误检测
- ❌ 音频剪辑/编辑功能
- ❌ 在线服务依赖
- ❌ 模型权重下载

## 安装

```bash
# 开发安装
pip install -e ".[dev]"
```

## 用法

### 检查依赖

```bash
# 基本用法
audioclean-seg check-deps

# JSON 格式输出
audioclean-seg check-deps --json

# 详细输出
audioclean-seg check-deps --verbose
```

**注意**: R1 版本仅提供占位实现，不会真正检查依赖。

### 音频分段

```bash
# 基本用法（R1 仅打印计划，不实际处理）
audioclean-seg segment --in audio.wav --out output_dir

# 指定分段策略和参数
audioclean-seg segment \
    --in audio.wav \
    --out output_dir \
    --strategy silence \
    --min-silence-sec 0.5 \
    --min-seg-sec 1.0 \
    --max-seg-sec 30.0 \
    --pad-sec 0.1 \
    --emit-wav \
    --jobs 4 \
    --overwrite

# 使用日志选项
audioclean-seg segment \
    --in audio.wav \
    --out output_dir \
    --log-level DEBUG \
    --log-file segment.log
```

**注意**: R1 版本仅完成骨架与 CLI，占位实现。后续版本将实现真实的 `silencedetect`、`energy`、`vad` 分段功能。

### 全局选项

- `--log-level`: 日志级别（DEBUG, INFO, WARNING, ERROR, CRITICAL），默认 INFO
- `--log-file`: 日志文件路径（可选）

## 开发

```bash
# 运行测试
pytest -q

# 运行单个测试
pytest tests/test_cli_help.py -v
```

## 版本说明

- **R1**: 项目骨架完成，CLI 可运行，占位实现
- 后续版本将实现真实的分段算法
